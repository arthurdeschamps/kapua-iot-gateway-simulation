# kapua-iot-gateway-simulation
Supply chain management simulator for kapua. The goal is to build a parameterizable simulator for quick tests of the kapua platform.


## Introduction
The simulation uses 3 sub-simulators: **company**, **economy** and **telemetry simulators**. One execution of any of
these 3 simulators corresponds to 1 hour elapsed in _virtual time_.

This _virtual time_ is used to speed up the simulation, since we don't want to
wait a week in front of our computer to see our first order, for example. The
default simulation uses a virtual time 100 times faster than real time, but it will
obviously be customizable via the UI in the long run.

The **company simulator** simulates everything related to the company and also acts as a "customer" simulator.
By using randomness, it triggers _events_ such as gaining or losing a customer, creating a new type of product, 
building products based on a product type, receiving orders from customers, planning deliveries, etc.
These events are heavily correlated to the economy simulator, since their likelihood depends in majority
on its attributes: growth, demand, concurrency, etc.

The **economy simulator** is a simple and purely random-based simulator which fluctuates the parameters defined in the 
**Economy** class.

Last but not least, the **telemetry simulator** reacts to some events triggered
the company and generates data in consequence. For instance, if a delivery goes
from state "warehouse" to "shipping", this simulator will start virtually moving the delivery
towards its destination and update the underlying data (delivery position, transportation
usage, etc)

Aside from the simulation, a service called **DataSenderRunner** is responsible for
periodically sending telemetry data (generated by the telemetry simulator) to Kapua.
## Project status of advancement
The economy simulator works fine on small scale durations, but seems to fail
and become unrealistic when running at very high time flow (10000 faster than reality,
for instance). It might also benefit from a more elaborated Economy class with more
attributes.

The company simulator is quite complex to manage and might be unrealistic sometimes.
However, it seems to be a good first draft for now.

The telemetry simulator is the last simulator to have been implemented and is
very thin is terms of generated data. It is one of the priorities to develop it.

One big step that has not been touched yet is the GUI. It will be used
for 3 purposes:
- Let the user entirely parametrize the simulation
- Display telemetry data sent to Kapua and their evolution
throughout time
- Display traditional data created by the company simulator (e.g. customers with their
names, addresses, etc)

## Start the simulation
There are 2 different simulations, both located in `simulation/main/`.

The first one is **DefaultSimulation**. It will
start **SupplyChainControlSimulator** which manages the whole simulation part (company, economy
and telemetry) as well as start the kapua gateway client which will
start another runnable object responsible for sending data to 
Kapua. With this simulation, you will be able to see the logs of the data sent
to the platform.

The second one is **DefaultSimulationWithMetrics**. This simulation does the same job
as the first one but will also periodically output economy metrics and company
attributes (number of orders, deliveries, etc).

## Technologies
### Language
Java

### Test
JUnit with Java

### Build automation tool
Apache Maven
