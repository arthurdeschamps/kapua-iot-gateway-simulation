# kapua-iot-gateway-simulation
Supply chain management simulator for kapua. The goal is to build a parameterizable simulator for quick tests of the kapua platform.


## Introduction
The simulation uses 3 sub-simulators: **company**, **economy** and **telemetry simulators**. One execution of any of
these 3 simulators corresponds to 1 hour elapsed in _virtual time_.

This _virtual time_ is used to speed up the simulation, since we don't want to
wait a week in front of our computer to see our first order, for example. The
default simulation uses a virtual time 100 times faster than real time, but it will
obviously be customizable via the UI in the long run.

The **company simulator** simulates everything related to the company and also acts as a "customer" simulator.
By using randomness, it triggers _events_ such as gaining or losing a customer, creating a new type of product, 
building products based on a product type, receiving orders from customers, planning deliveries, etc.
These events are heavily correlated to the economy simulator, since their likelihood depends in majority
on its attributes: growth, demand, concurrency, etc.

The **economy simulator** is a simple and purely random-based simulator which fluctuates the parameters defined in the 
**Economy** class.

Last but not least, the **telemetry simulator** reacts to some events triggered
the company and generates data in consequence. For instance, if a delivery goes
from state "warehouse" to "shipping", this simulator will start virtually moving the delivery
towards its destination and update the underlying data (delivery position, transportation
usage, etc)

Aside from the simulation, a service called **DataSenderRunner** is responsible for
periodically sending telemetry data (generated by the telemetry simulator) to Kapua.

## Project status of advancement
The economy simulator works fine on small scale durations, but seems to fail
and become unrealistic when running at very high time flow (10000 faster than reality,
for instance). It might also benefit from a more elaborated Economy class with more
attributes.

The company simulator is quite complex to manage and might be unrealistic sometimes.
However, it seems to be a good first draft for now.

The telemetry simulator is the last simulator to have been implemented and is
very thin is terms of generated data. It is one of the priorities to develop it.

One big step that has not been touched yet is the GUI. It will be used
for 3 purposes:
- Let the user entirely parametrize the simulation
- Display telemetry data sent to Kapua and their evolution
throughout time
- Display traditional data created by the company simulator (e.g. customers with their
names, addresses, etc)

## Start the simulation
You can start the simulation by running 
`src/main/java/simulation/main/DefaultSimulation`.
It will start the different simulators and start sending data to Kapua.

##Customize the simulation
In order to fully control the parameters of the simulation, you just
need to check the class `simulation/main/DefaultSimulation` 
and modify the *Parametrizer* object, either by instantiating it with every parameter
or by using the default constructor and then set the attributes you want 
to tune.

See `simulation/main/Parametrizer` for more information on how to parametrize
the simulation.

## Technologies
### Language
Java

### Test
JUnit with Java

### Build automation tool
Apache Maven
